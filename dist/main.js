var Client;Client=(()=>{"use strict";var e={300:(e,t)=>{var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},751:(e,t,n)=>{n.r(t),n.d(t,{handleClick:()=>h});const a=n(300),i=document,o="d9a7c54b42a44a20b282f7feace11f1f",s="19447411-f6214215cf4f2ec18faaf22e1",l=i.querySelector(".destinations"),r=i.getElementById("loc"),c=i.getElementById("date"),d=i.querySelector("form"),p=i.querySelector(".loading");let u,f;p.style.display="none";let m=[];function y(e){m.push(e),m=m.sort(((e,t)=>parseFloat(e.diff_days)-parseFloat(t.diff_days))),l.innerHTML=m.map(((e,t)=>{const n=`<div class = "display">\n                <h3>Packing List</h3> \n                <p> ${e.info} </p>\n            </div>`,a=e.info?n:"";return`\n\n            <li data-index = ${t}>\n                <div class="dest1">\n                    <h2>${e.loc}, ${e.country}</h2>\n                    <img src="${e.locImage}" alt="se" width="200px" height="150px">\n                    <h4>${e.diff_days} Days left. <br>Departing on: ${e.dateVal} </h4>\n                    <div class="weatherContainer">\n                        <div id="weatherDescriptionHeader">${e.descr}</div>\n                        <div id="weatherMain">\n                            <div id="temperature"><h2>${Math.floor(e.temp)} &#8451;</h2></div>\n                            <div id="documentIconImg"><img src="${e.iconUrl}"></div>\n                            <div class="bottomDetails"> \n                                <div id="feel">Feels like ${Math.floor(e.feelsLike)} &#8451;</div>\n                                <div id="windSpeed" class="bottom-details">Wind Speed: ${Math.floor(e.wind)} m/s</div>\n                                <div id="humidity" class="bottom-details">Humidity: ${Math.floor(e.hum)}</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class = "tripps">\n                        ${a}\n                        <button id = ${t} data-pack = ${t} class = "but">Add Packing List </button>\n                        <button id = "save" data-index = ${t} job = "save">Save Trip</button>\n                    </div>\n                </div>   \n        </li>`})).join("")}function h(e){if("button"==e.target.localName){const t=e.target;let n=Math.floor(1e3*Math.random());if("Save Trip"==t.innerText)!function(e,t){const n=i.createElement("div"),a=e.dataset.index;if(3==e.parentElement.firstChild.rows){let t;if(i.querySelectorAll("textarea").forEach((e=>{e.dataset.index==a&&(t=e.value)})),n.setAttribute("index",a),n.classList.add("display"),t){let i;i=t.split("\n"),n.innerHTML="<h3>Packing List</h3>",i.forEach((e=>{n.innerHTML+=`<p>${e}</p>`})),m[a].info=t,e.parentElement.insertAdjacentElement("afterbegin",n),e.parentElement.firstElementChild.nextElementSibling.remove()}else e.parentElement.getElementsByTagName("textarea")[0].style.display="none"}else e.previousElementSibling.style.display="none";m[a].delkey=t,localStorage.setItem(`${t}`,JSON.stringify(m[a])),e.innerText="Delete Trip"}(t,n);else if("Delete Trip"==t.innerText)!function(e){let t,n,a=Object.keys(localStorage);m.forEach(((e,i)=>{e.delkey==a[i]?(t=m.indexOf(e),n=e.delkey):t=-1})),m.splice(t,1),localStorage.removeItem(n),e.parentElement.parentElement.parentElement.remove()}(t);else{if(t.dataset.pack!=t.nextElementSibling.dataset.index)return;{let e=i.createElement("textarea");e.setAttribute("id","notes"),e.rows=3,e.cols=8,t.parentElement.insertAdjacentElement("afterbegin",e);const n=t.dataset.pack;e.setAttribute("data-index",n),i.getElementById(n).style.display="none"}}}}d.addEventListener("submit",(async function(e){e.preventDefault();let t=r.value.split(" ");t.length>1?(f=t[0].substring(0,1).toUpperCase()+t[0].substring(1,t[0].length).toLowerCase()+" "+t[1].substring(0,1).toUpperCase()+t[1].substring(1,t[1].length).toLowerCase(),2==t[1].length&&t[1].toUpperCase()):f=r.value.substring(0,1).toUpperCase()+r.value.substring(1,r.value.length).toLowerCase();const n=c.value;if(!f||!n)return alert("Please make sure all input fields are filled"),!1;{setTimeout((function(){l.innerHTML=p.innerHTML,p.style.display="block"}),100);const t=new Date(n+"T00:00:00");let i=(new Date).getTime(),d=t.getTime(),m=i+6048e5,h=Math.floor((d-i)/864e5)+1;if(h<0)return alert("Please enter a valid date"),!1;const g=`https://api.mapbox.com/geocoding/v5/mapbox.places/${f}.json?access_token=pk.eyJ1IjoibnZhdG90YSIsImEiOiJja2cyanh1YWEwMWtsMnJxb2FqMnl6c29hIn0.UOPeQLlo06yJe6YZd_yDOw`,v=await a(g);try{const e=await v.json(),t=e.features[0].center[0],i=e.features[0].center[1],l=`https://api.weatherbit.io/v2.0/current?lat=${i}&lon=${t}&key=${o}`,r=`https://api.weatherbit.io/v2.0/forecast/daily?lat=${i}&lon=${t}&days=${h}&key=${o}`;u=d>m?r:l,async function(e){const t=await a(e);try{return await t.json()}catch(e){console.log("Request Unsuccessful")}}(u).then((function(e){!async function(e,t,n,i){console.log(e),console.log(t);const o=e.data.length>1?e.data[e.data.length-1]:e.data[0];console.log(e.data.length-1),console.log(o);const l=o.temp;console.log("temp: "+l);const r=o.rh,c=o.weather.description,d=o.weather.icon,p=e.data.length>1?e.country_code:o.country_code,u=o.app_max_temp?(o.app_max_temp+o.app_min_temp)/2:o.app_temp,f=`https://www.weatherbit.io/static/img/icons/${d}.png`,m=o.wind_spd,h=await async function(e){const t=`https://pixabay.com/api/?key=${s}&q=${e}&per_page=3&image_type=photo`,n=await a(t);try{const e=await n.json();return 0==e.hits.length?"https://cdn.pixabay.com/photo/2018/05/06/15/48/city-3378773_960_720.jpg":e.hits[0].webformatURL}catch(e){console.log("Request Unsuccessful")}}(n);(async function(e,t){await a(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})})("/send",{country:p,diff_days:t,temp:l,descr:c,iconUrl:f,feelsLike:u,wind:m,hum:r,locImage:h,dateVal:i,loc:n}),async function(){const e=await a("/get");y(await e.json())}()}(e,h,f,n)}))}catch(e){console.log("Request Unsuccessful")}r.value="",c.value=""}}));const g={...localStorage};if(Object.getOwnPropertyNames(g).length>0)for(var v in g){y(JSON.parse(g[v]));i.querySelectorAll("#save").forEach((e=>{e.innerText="Delete Trip"}));i.querySelectorAll("button[data-pack]").forEach((e=>{e.style.display="none"}))}}},t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(751)})();