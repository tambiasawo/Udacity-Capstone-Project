var Client;Client=(()=>{"use strict";var e={300:(e,t)=>{var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},751:(e,t,n)=>{n.r(t),n.d(t,{handleClick:()=>m});const a=n(300),i=document,o="d9a7c54b42a44a20b282f7feace11f1f",r="19447411-f6214215cf4f2ec18faaf22e1",s=i.querySelector(".destinations"),l=i.getElementById("loc"),d=i.getElementById("date"),c=i.querySelector("form");let p,f=[];function u(e){f.push(e),f=f.sort(((e,t)=>parseFloat(e.diff_days)-parseFloat(t.diff_days))),s.innerHTML=f.map(((e,t)=>{const n=`<div class = "display">\n                <h3>Packing List</h3> \n                <p> ${e.info} </p>\n            </div>`,a=e.info?n:"";return`\n            <li data-index = ${t}>\n                <div class="dest1">\n                    <h2>${e.loc}, ${e.country}</h2>\n                    <img src="${e.locImage}" alt="se" width="200px" height="150px">\n                    <h4>${e.diff_days} Days left. <br>Departing on: ${e.dateVal} </h4>\n                    <div class="weatherContainer">\n                        <div id="weatherDescriptionHeader">${e.descr}</div>\n                        <div id="weatherMain">\n                            <div id="temperature"><h2>${Math.floor(e.temp)} &#8451;</h2></div>\n                            <div id="documentIconImg"><img src="${e.iconUrl}"></div>\n                            <div class="bottomDetails"> \n                                <div id="feel">Feels like ${Math.floor(e.feelsLike)} &#8451;</div>\n                                <div id="windSpeed" class="bottom-details">Wind Speed: ${Math.floor(e.wind)} m/s</div>\n                                <div id="humidity" class="bottom-details">Humidity: ${Math.floor(e.hum)}</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class = "tripps">\n                        ${a}\n                        <button id = ${t} data-pack = ${t} class = "but">Add Packing List </button>\n                        <button id = "save" data-index = ${t} job = "save">Save Trip</button>\n                    </div>\n                </div>   \n        </li>`})).join("")}function m(e){if("button"==e.target.localName){const t=e.target;let n=Math.floor(1e3*Math.random());if("Save Trip"==t.innerText)!function(e,t){const n=i.createElement("div"),a=e.dataset.index;if(3==e.parentElement.firstChild.rows){let t;if(i.querySelectorAll("textarea").forEach((e=>{e.dataset.index==a&&(t=e.value)})),n.setAttribute("index",a),n.classList.add("display"),t){let i;i=t.split("\n"),n.innerHTML="<h3>Packing List</h3>",i.forEach((e=>{n.innerHTML+=`<p>${e}</p>`})),f[a].info=t,e.parentElement.insertAdjacentElement("afterbegin",n),e.parentElement.firstElementChild.nextElementSibling.remove()}else e.parentElement.getElementsByTagName("textarea")[0].style.display="none"}else e.previousElementSibling.style.display="none";f[a].delkey=t,localStorage.setItem(`${t}`,JSON.stringify(f[a])),e.innerText="Delete Trip"}(t,n);else if("Delete Trip"==t.innerText)!function(e){let t,n,a=Object.keys(localStorage);f.forEach(((e,i)=>{e.delkey==a[i]?(t=f.indexOf(e),n=e.delkey):t=-1})),f.splice(t,1),localStorage.removeItem(n),e.parentElement.parentElement.parentElement.remove()}(t);else{if(t.dataset.pack!=t.nextElementSibling.dataset.index)return;{let e=i.createElement("textarea");e.setAttribute("id","notes"),e.rows=3,e.cols=8,t.parentElement.insertAdjacentElement("afterbegin",e);const n=t.dataset.pack;e.setAttribute("data-index",n),i.getElementById(n).style.display="none"}}}}c.addEventListener("submit",(async function(e){e.preventDefault();const t=l.value.substring(0,1).toUpperCase()+l.value.substring(1,l.value.length).toLowerCase(),n=d.value;if(!t||!n)return alert("Please make sure all input fields are filled"),!1;{const i=new Date(n+"T00:00:00");let s=(new Date).getTime(),c=i.getTime(),f=s+6048e5,m=Math.floor((c-s)/864e5)+1;if(m<0)return alert("Please enter a valid date"),!1;const h=`http://api.geonames.org/searchJSON?q=${t}&maxRows=10&username=mani1`,y=await a(h);try{const e=await y.json(),i=e.geonames[0].lng,s=e.geonames[0].lat,l=`https://api.weatherbit.io/v2.0/current?lat=${s}&lon=${i}&key=${o}`,d=`https://api.weatherbit.io/v2.0/forecast/daily?lat=${s}&lon=${i}&days=${m}&key=${o}`;p=c>f?d:l,async function(e){const t=await a(e);try{return await t.json()}catch(e){console.log("Request Unsuccessful")}}(p).then((function(e){!async function(e,t,n,i){const o=e.data.length>1?e.data[t-1]:e.data[0],s=o.temp,l=o.rh,d=o.weather.description,c=o.weather.icon,p=e.data.length>1?e.country_code:o.country_code,f=o.app_max_temp?(o.app_max_temp+o.app_min_temp)/2:o.app_temp,m=`https://www.weatherbit.io/static/img/icons/${c}.png`,h=o.wind_spd,y=await async function(e){const t=`https://pixabay.com/api/?key=${r}&q=${e}&per_page=3&image_type=photo`,n=await a(t);try{const e=await n.json();return 0==e.hits.length?"https://cdn.pixabay.com/photo/2018/05/06/15/48/city-3378773_960_720.jpg":e.hits[0].webformatURL}catch(e){console.log("Request Unsuccessful")}}(n);(async function(e,t){await a(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})})("/send",{country:p,diff_days:t,temp:s,descr:d,iconUrl:m,feelsLike:f,wind:h,hum:l,locImage:y,dateVal:i,loc:n}),async function(){const e=await a("/get");u(await e.json())}()}(e,m,t,n)}))}catch(e){console.log("Request Unsuccessful")}l.value="",d.value=""}}));const h={...localStorage};if(Object.getOwnPropertyNames(h).length>0)for(var y in h){u(JSON.parse(h[y]));i.querySelectorAll("#save").forEach((e=>{e.innerText="Delete Trip"}));i.querySelectorAll("button[data-pack]").forEach((e=>{e.style.display="none"}))}}},t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(751)})();